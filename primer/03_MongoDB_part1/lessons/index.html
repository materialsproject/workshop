<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Lessons for the Materials Project Workshop"><link href=https://workshop.materialsproject.org/primer/03_MongoDB_part1/lessons/ rel=canonical><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.5.0"><title>Intro to MongoDB - The Materials Project Workshop</title><link rel=stylesheet href=../../../assets/stylesheets/main.b5d04df8.min.css><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../../../workshop.css><link rel=stylesheet href=../../../css/ansi-colours.css><link rel=stylesheet href=../../../css/jupyter-cells.css><link rel=stylesheet href=../../../css/pandas-dataframe.css></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#intro-to-mongodb-and-the-nobel-prize-dataset-lesson-1 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://workshop.materialsproject.org title="The Materials Project Workshop" class="md-header-nav__button md-logo" aria-label="The Materials Project Workshop"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 2l-5 4.5v11l5-4.5V2M6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> The Materials Project Workshop </span> <span class="md-header-nav__topic md-ellipsis"> Intro to MongoDB </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/materialsproject/workshop/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://workshop.materialsproject.org title="The Materials Project Workshop" class="md-nav__button md-logo" aria-label="The Materials Project Workshop"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 2l-5 4.5v11l5-4.5V2M6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5z"/></svg> </a> The Materials Project Workshop </label> <div class=md-nav__source> <a href=https://github.com/materialsproject/workshop/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. title=Home class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../../logistics/logistics/ title=Logistics class=md-nav__link> Logistics </a> </li> <li class=md-nav__item> <a href=../../../people/people/ title=People class=md-nav__link> People </a> </li> <li class=md-nav__item> <a href=../../../code_of_conduct/ title="Code of Conduct" class=md-nav__link> Code of Conduct </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5 checked> <label class=md-nav__link for=nav-5> Primer <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Primer data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Primer </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../01_basic_python/0%20-%20Introduction%20and%20Jupyter%20Use/ title=Intro class=md-nav__link> Intro </a> </li> <li class=md-nav__item> <a href=../../01_basic_python/1%20-%20Python%20Primer/ title="Basic Python" class=md-nav__link> Basic Python </a> </li> <li class=md-nav__item> <a href=../../02_building_logic/2%20-%20Python%20Primer%20-%20Part%20II/ title="Advanced Python" class=md-nav__link> Advanced Python </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Intro to MongoDB <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="Intro to MongoDB" class="md-nav__link md-nav__link--active"> Intro to MongoDB </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#why-mongodb class=md-nav__link> Why MongoDB? </a> <nav class=md-nav aria-label="Why MongoDB?"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mongodb-structure class=md-nav__link> MongoDB Structure </a> </li> <li class=md-nav__item> <a href=#data-structure class=md-nav__link> Data Structure </a> </li> <li class=md-nav__item> <a href=#javascript-object-notation-json class=md-nav__link> JavaScript Object Notation (JSON) </a> </li> <li class=md-nav__item> <a href=#json-longleftrightarrowlongleftrightarrow-python class=md-nav__link> JSON \longleftrightarrow\longleftrightarrow Python </a> </li> <li class=md-nav__item> <a href=#accessing-mongodb class=md-nav__link> Accessing MongoDB </a> </li> <li class=md-nav__item> <a href=#searching-for-documents class=md-nav__link> Searching for documents </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#listing-and-counting-lesson-2 class=md-nav__link> Listing and Counting - Lesson 2 </a> <nav class=md-nav aria-label="Listing and Counting - Lesson 2"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#listing-databases-and-collections class=md-nav__link> Listing databases and collections </a> </li> <li class=md-nav__item> <a href=#counting-documents class=md-nav__link> Counting documents </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#finding-and-dot-notation-lesson-3 class=md-nav__link> Finding, and Dot Notation - Lesson 3 </a> <nav class=md-nav aria-label="Finding, and Dot Notation - Lesson 3"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#query-operators class=md-nav__link> Query operators </a> </li> <li class=md-nav__item> <a href=#using-dot-notation class=md-nav__link> Using dot notation </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../04_MongoDB_part2/lesson/ title="Advanced MongoDB" class=md-nav__link> Advanced MongoDB </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Workshop <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Workshop data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Workshop </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../lessons/01_website_walkthrough/website_walkthrough/ title="The Materials Project Website" class=md-nav__link> The Materials Project Website </a> </li> <li class=md-nav__item> <a href=../../../lessons/02_intro_pymatgen/1%20-%20pymatgen%20foundations/ title="Intro to Pymatgen" class=md-nav__link> Intro to Pymatgen </a> </li> <li class=md-nav__item> <a href=../../../lessons/03_surfaces/Working%20With%20Surfaces_lesson/ title="Working with Surfaces" class=md-nav__link> Working with Surfaces </a> </li> <li class=md-nav__item> <a href=../../../lessons/04_materials_api/api_use/ title="The Materials API" class=md-nav__link> The Materials API </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#why-mongodb class=md-nav__link> Why MongoDB? </a> <nav class=md-nav aria-label="Why MongoDB?"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mongodb-structure class=md-nav__link> MongoDB Structure </a> </li> <li class=md-nav__item> <a href=#data-structure class=md-nav__link> Data Structure </a> </li> <li class=md-nav__item> <a href=#javascript-object-notation-json class=md-nav__link> JavaScript Object Notation (JSON) </a> </li> <li class=md-nav__item> <a href=#json-longleftrightarrowlongleftrightarrow-python class=md-nav__link> JSON \longleftrightarrow\longleftrightarrow Python </a> </li> <li class=md-nav__item> <a href=#accessing-mongodb class=md-nav__link> Accessing MongoDB </a> </li> <li class=md-nav__item> <a href=#searching-for-documents class=md-nav__link> Searching for documents </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#listing-and-counting-lesson-2 class=md-nav__link> Listing and Counting - Lesson 2 </a> <nav class=md-nav aria-label="Listing and Counting - Lesson 2"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#listing-databases-and-collections class=md-nav__link> Listing databases and collections </a> </li> <li class=md-nav__item> <a href=#counting-documents class=md-nav__link> Counting documents </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#finding-and-dot-notation-lesson-3 class=md-nav__link> Finding, and Dot Notation - Lesson 3 </a> <nav class=md-nav aria-label="Finding, and Dot Notation - Lesson 3"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#query-operators class=md-nav__link> Query operators </a> </li> <li class=md-nav__item> <a href=#using-dot-notation class=md-nav__link> Using dot notation </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/materialsproject/workshop/edit/master/docs/primer/03_MongoDB_part1/lessons.ipynb title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <script src=https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js></script> <script>
(function() {
  function addWidgetsRenderer() {
    var mimeElement = document.querySelector('script[type="application/vnd.jupyter.widget-view+json"]');
    var scriptElement = document.createElement('script');
    var widgetRendererSrc = 'https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js';
    var widgetState;

    // Fallback for older version:
    try {
      widgetState = mimeElement && JSON.parse(mimeElement.innerHTML);

      if (widgetState && (widgetState.version_major < 2 || !widgetState.version_major)) {
        widgetRendererSrc = 'jupyter-js-widgets@*/dist/embed.js';
      }
    } catch(e) {}

    scriptElement.src = widgetRendererSrc;
    document.body.appendChild(scriptElement);
  }

  document.addEventListener('DOMContentLoaded', addWidgetsRenderer);
}());
</script> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h1 id=intro-to-mongodb-and-the-nobel-prize-dataset-lesson-1>Intro to MongoDB and the Nobel Prize Dataset - Lesson 1<a class=headerlink href=#intro-to-mongodb-and-the-nobel-prize-dataset-lesson-1 title="Permanent link">&para;</a></h1> <p></div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h2 id=why-mongodb>Why MongoDB?<a class=headerlink href=#why-mongodb title="Permanent link">&para;</a></h2> <ul> <li>All Materials Project data is stored using MongoDB </li> <li>Our API query language is based on MongoDB syntax </div> </div></li> </ul> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h3 id=mongodb-structure>MongoDB Structure<a class=headerlink href=#mongodb-structure title="Permanent link">&para;</a></h3> <ul> <li>Data objects represented by <strong><em>documents</em></strong></li> <li>Documents organized into <strong><em>collections</em></strong></li> <li>Collections make up a <strong><em>database</em></strong> </div> </div></li> </ul> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h3 id=data-structure>Data Structure<a class=headerlink href=#data-structure title="Permanent link">&para;</a></h3> <p></div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> object → {<code>field</code>: <code>value</code>, <code>field1</code>: <code>value1</code>, ...}</p> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> fields: <code>string</code></p> <p>values: <code>string</code>, <code>int/double</code>, <code>true</code>, <code>false</code>, <code>null</code>, <code>array</code>, <code>object</code>, ... </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> <em>example:</em></p> <p><div class=highlight><pre><span></span><code>{
    name: Sue,
    age: 28,
    lawSpecialties: [copyright, tax],
    canMeet:
        { 
            mon: True,
            tues: False,
            wed: True,
            thurs: True,
            fri: False,
        }    
}
</code></pre></div> </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h3 id=javascript-object-notation-json>JavaScript Object Notation (JSON)<a class=headerlink href=#javascript-object-notation-json title="Permanent link">&para;</a></h3> <p></div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> object → {<code>string</code>: <code>value</code>, <code>string1</code>: <code>value1</code>, ...}</p> <p>values: <code>string</code>, <code>number</code>, <code>true</code>, <code>false</code>, <code>null</code>, <code>object</code>, <code>array</code> </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h3 id=json-longleftrightarrowlongleftrightarrow-python>JSON <span><span class=MathJax_Preview>\longleftrightarrow</span><script type=math/tex>\longleftrightarrow</script></span> Python<a class=headerlink href=#json-longleftrightarrowlongleftrightarrow-python title="Permanent link">&para;</a></h3> <p></div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> objects → {<code>string</code>: <code>value</code>,<code>string1</code>: <code>value1</code>, ...}</p> <p>---&gt; <em>dictionaries</em> (with <code>str</code> keys) </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> arrays → [<code>value</code>, <code>value1</code>, ...]</p> <p>---&gt; <em>lists</em> </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> values: <code>string</code>, <code>number</code>, <code>true</code>, <code>false</code>, <code>null</code>, <code>object</code>, <code>array</code></p> <p><div class=highlight><pre><span></span><code><span class=nb>str</span><span class=p>,</span> <span class=nb>int</span><span class=p>,</span> <span class=nb>float</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>None</span><span class=p>,</span> <span class=nb>dict</span><span class=p>,</span> <span class=nb>list</span>
</code></pre></div> </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h3 id=accessing-mongodb>Accessing MongoDB<a class=headerlink href=#accessing-mongodb title="Permanent link">&para;</a></h3> <p></div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> We can access our MongoDB databases using an instance of <code>MongoClient</code> from the <code>pymongo</code> package. </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>pymongo</span> <span class=kn>import</span> <span class=n>MongoClient</span>

<span class=n>client</span> <span class=o>=</span> <span class=n>MongoClient</span><span class=p>()</span>
<span class=nb>print</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>MongoClient(host=[&#39;localhost:27017&#39;], document_class=dict, tz_aware=False, connect=True)
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> You can access databases and collections as attributes and/or treat them as dictionary keys. </div> </div></p> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=n>client</span><span class=o>.</span><span class=n>nobel</span> <span class=o>==</span> <span class=n>client</span><span class=p>[</span><span class=s2>&quot;nobel&quot;</span><span class=p>]</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_text output_subarea output_execute_result"> <pre>
<code>True</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=n>client</span><span class=o>.</span><span class=n>nobel</span><span class=o>.</span><span class=n>prizes</span> <span class=o>==</span> <span class=n>client</span><span class=p>[</span><span class=s2>&quot;nobel&quot;</span><span class=p>][</span><span class=s2>&quot;prizes&quot;</span><span class=p>]</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_text output_subarea output_execute_result"> <pre>
<code>True</code>
</pre> </div> </div> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> We can also connect to the nobel database. </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=n>db</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>nobel</span>
<span class=nb>print</span><span class=p>(</span><span class=n>db</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>Database(MongoClient(host=[&#39;localhost:27017&#39;], document_class=dict, tz_aware=False, connect=True), &#39;nobel&#39;)
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h3 id=searching-for-documents>Searching for documents<a class=headerlink href=#searching-for-documents title="Permanent link">&para;</a></h3> <p></div> </div></p> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> Let's see what a document looks like in the <code>prizes</code> collection using the <code>find_one()</code> method. This takes an optional <code>filter</code> argument. Passing an empty filter (<code>{}</code>) is the same as passing no filter. In Python, the returned document takes the form of a dictionary. The keys of the dictionary are the (root-level) "fields" of the document. </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=n>db</span><span class=o>.</span><span class=n>prizes</span><span class=o>.</span><span class=n>find_one</span><span class=p>({})</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_text output_subarea output_execute_result"> <pre>
<code>{&#39;_id&#39;: ObjectId(&#39;5f1f4e9430688833f8e30309&#39;),
 &#39;year&#39;: &#39;2019&#39;,
 &#39;category&#39;: &#39;chemistry&#39;,
 &#39;laureates&#39;: [{&#39;id&#39;: &#39;976&#39;,
   &#39;firstname&#39;: &#39;John&#39;,
   &#39;surname&#39;: &#39;Goodenough&#39;,
   &#39;motivation&#39;: &#39;&#34;for the development of lithium-ion batteries&#34;&#39;,
   &#39;share&#39;: &#39;3&#39;},
  {&#39;id&#39;: &#39;977&#39;,
   &#39;firstname&#39;: &#39;M. Stanley&#39;,
   &#39;surname&#39;: &#39;Whittingham&#39;,
   &#39;motivation&#39;: &#39;&#34;for the development of lithium-ion batteries&#34;&#39;,
   &#39;share&#39;: &#39;3&#39;},
  {&#39;id&#39;: &#39;978&#39;,
   &#39;firstname&#39;: &#39;Akira&#39;,
   &#39;surname&#39;: &#39;Yoshino&#39;,
   &#39;motivation&#39;: &#39;&#34;for the development of lithium-ion batteries&#34;&#39;,
   &#39;share&#39;: &#39;3&#39;}]}</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> We can now add a filter to our search to ensure that the returned <code>prizes</code> document contains data for a physics nobel prize. </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> </div> </div> <div class=highlight><pre><span></span><code><span class=n>criteria</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;category&quot;</span><span class=p>:</span> <span class=s2>&quot;physics&quot;</span><span class=p>}</span>
<span class=n>db</span><span class=o>.</span><span class=n>prizes</span><span class=o>.</span><span class=n>find_one</span><span class=p>(</span><span class=n>criteria</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_text output_subarea output_execute_result"> <pre>
<code>{&#39;_id&#39;: ObjectId(&#39;5f1f4e9430688833f8e3030d&#39;),
 &#39;year&#39;: &#39;2019&#39;,
 &#39;category&#39;: &#39;physics&#39;,
 &#39;overallMotivation&#39;: &#39;&#34;for contributions to our understanding of the evolution of the universe and Earth’s place in the cosmos&#34;&#39;,
 &#39;laureates&#39;: [{&#39;id&#39;: &#39;973&#39;,
   &#39;firstname&#39;: &#39;James&#39;,
   &#39;surname&#39;: &#39;Peebles&#39;,
   &#39;motivation&#39;: &#39;&#34;for theoretical discoveries in physical cosmology&#34;&#39;,
   &#39;share&#39;: &#39;2&#39;},
  {&#39;id&#39;: &#39;974&#39;,
   &#39;firstname&#39;: &#39;Michel&#39;,
   &#39;surname&#39;: &#39;Mayor&#39;,
   &#39;motivation&#39;: &#39;&#34;for the discovery of an exoplanet orbiting a solar-type star&#34;&#39;,
   &#39;share&#39;: &#39;4&#39;},
  {&#39;id&#39;: &#39;975&#39;,
   &#39;firstname&#39;: &#39;Didier&#39;,
   &#39;surname&#39;: &#39;Queloz&#39;,
   &#39;motivation&#39;: &#39;&#34;for the discovery of an exoplanet orbiting a solar-type star&#34;&#39;,
   &#39;share&#39;: &#39;4&#39;}]}</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> You may iterate over a collection, collecting from each document. However, a collection is not a list, so we can't write <code>for doc in &lt;collection&gt;</code> to iterate over documents. Instead, we can use the <code>find()</code> method to produce an iterable called a <em>cursor</em>, and instead write <code>for doc in &lt;collection&gt;.find()</code> to iterate over documents. </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> - Using <code>find()</code> to iterate over documents in the <code>laureates</code> collection, sum the total number of laureate prizes. The length of <code>doc["prizes"]</code> for a laureate document <code>doc</code> is the number of prizes won by that laureate. Store the sum in the variable <code>count</code>. </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1># Compute the total number of laureate prizes</span>
<span class=n>count</span> <span class=o>=</span> <span class=mi>0</span>
<span class=n>cursor</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>laureates</span><span class=o>.</span><span class=n>find</span><span class=p>({})</span>
<span class=k>for</span> <span class=n>doc</span> <span class=ow>in</span> <span class=n>cursor</span><span class=p>:</span>
    <span class=n>num_prizes</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>doc</span><span class=p>[</span><span class=s2>&quot;prizes&quot;</span><span class=p>])</span>
    <span class=n>count</span> <span class=o>+=</span> <span class=n>num_prizes</span>
</code></pre></div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=n>count</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_text output_subarea output_execute_result"> <pre>
<code>950</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h2 id=listing-and-counting-lesson-2>Listing and Counting - Lesson 2<a class=headerlink href=#listing-and-counting-lesson-2 title="Permanent link">&para;</a></h2> <p></div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> </div> </div> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>pymongo</span> <span class=kn>import</span> <span class=n>MongoClient</span>

<span class=n>client</span> <span class=o>=</span> <span class=n>MongoClient</span><span class=p>()</span>
<span class=nb>print</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>MongoClient(host=[&#39;localhost:27017&#39;], document_class=dict, tz_aware=False, connect=True)
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h3 id=listing-databases-and-collections>Listing databases and collections<a class=headerlink href=#listing-databases-and-collections title="Permanent link">&para;</a></h3> <p></div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> Recall: - Data objects represented by <strong><em>documents</em></strong> - Documents organized into <strong><em>collections</em></strong> - Collections make up a <strong><em>database</em></strong></p> <p>We can list database names by calling <code>list_database_names()</code> on a client instance, and we can list collection names by calling <code>list_collection_names()</code> on a database instance. </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> - How many databases are managed by <code>client</code>? </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1># Save a list of names of the databases managed by client</span>
<span class=n>db_names</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>list_database_names</span><span class=p>()</span>
<span class=nb>print</span><span class=p>(</span><span class=n>db_names</span><span class=p>)</span>

<span class=c1># Save a list of names of the collections managed by the &quot;nobel&quot; database</span>
<span class=n>nobel_coll_names</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>nobel</span><span class=o>.</span><span class=n>list_collection_names</span><span class=p>()</span>
<span class=nb>print</span><span class=p>(</span><span class=n>nobel_coll_names</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>[&#39;admin&#39;, &#39;config&#39;, &#39;drone_test&#39;, &#39;fireworks&#39;, &#39;local&#39;, &#39;maggma_test&#39;, &#39;mp_workshop&#39;, &#39;nobel&#39;]
[&#39;prizes&#39;, &#39;laureates&#39;]
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h3 id=counting-documents>Counting documents<a class=headerlink href=#counting-documents title="Permanent link">&para;</a></h3> <p></div> </div></p> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1># Connect to our &quot;nobel&quot; database</span>
<span class=n>db</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>nobel</span>
</code></pre></div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> The <code>count_documents()</code> method of a collection can be used to count the number of documents matching a particular filter. Let's use the method to count the total number of nobel laureates who died in the USA.</p> <p>An example <code>laureates</code> document:</p> <p><div class=highlight><pre><span></span><code>{&#39;_id&#39;: ObjectId(&#39;5b9ac94ff35b63cf5231ccb1&#39;),
 &#39;born&#39;: &#39;1845-03-27&#39;,
 &#39;bornCity&#39;: &#39;Lennep (now Remscheid)&#39;,
 &#39;bornCountry&#39;: &#39;Prussia (now Germany)&#39;,
 &#39;bornCountryCode&#39;: &#39;DE&#39;,
 &#39;died&#39;: &#39;1923-02-10&#39;,
 &#39;diedCity&#39;: &#39;Munich&#39;,
 &#39;diedCountry&#39;: &#39;Germany&#39;,
 &#39;diedCountryCode&#39;: &#39;DE&#39;,
 &#39;firstname&#39;: &#39;Wilhelm Conrad&#39;,
 &#39;gender&#39;: &#39;male&#39;,
 &#39;id&#39;: &#39;1&#39;,
 &#39;prizes&#39;: [{&#39;affiliations&#39;: [{&#39;city&#39;: &#39;Munich&#39;,
                               &#39;country&#39;: &#39;Germany&#39;,
                               &#39;name&#39;: &#39;Munich University&#39;}],
             &#39;category&#39;: &#39;physics&#39;,
             &#39;motivation&#39;: &#39;&quot;in recognition of the extraordinary services &#39;
                           &#39;he has rendered by the discovery of the &#39;
                           &#39;remarkable rays subsequently named after him&quot;&#39;,
             &#39;share&#39;: &#39;1&#39;,
             &#39;year&#39;: &#39;1901&#39;}],
 &#39;surname&#39;: &#39;Röntgen&#39;}
</code></pre></div> </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=n>db</span><span class=o>.</span><span class=n>laureates</span><span class=o>.</span><span class=n>count_documents</span><span class=p>({</span><span class=s2>&quot;diedCountry&quot;</span><span class=p>:</span> <span class=s2>&quot;USA&quot;</span><span class=p>})</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_text output_subarea output_execute_result"> <pre>
<code>222</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> We can now build out our filter to reduce the total number of matching documents:</p> <ul> <li>Create a filter <code>criteria</code> to count the number of laureates who died in the USA but were born (<code>"bornCountry"</code>) in Germany. </div> </div></li> </ul> </div> <div class="cell border-box-sizing code_cell rendered"></div> </div> <div class=input> <div class=highlight><pre><span></span><code><span class=c1># Create a filter for laureates who died in the USA but were born in Germany</span>
<span class=n>criteria</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;diedCountry&quot;</span><span class=p>:</span> <span class=s2>&quot;USA&quot;</span><span class=p>,</span> <span class=s2>&quot;bornCountry&quot;</span><span class=p>:</span> <span class=s2>&quot;Germany&quot;</span><span class=p>}</span>

<span class=c1># Save a count</span>
<span class=n>count</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>laureates</span><span class=o>.</span><span class=n>count_documents</span><span class=p>(</span><span class=n>criteria</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>count</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>5
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> - Count laureates who died in the USA, were born in Germany, and whose first name (<code>"firstname"</code>) was "Albert". </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1># Create a filter for laureates who died in the USA, were born in Germany, and whose first name was Albert.</span>
<span class=n>criteria</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;diedCountry&quot;</span><span class=p>:</span> <span class=s2>&quot;USA&quot;</span><span class=p>,</span> <span class=s2>&quot;bornCountry&quot;</span><span class=p>:</span> <span class=s2>&quot;Germany&quot;</span><span class=p>,</span> <span class=s2>&quot;firstname&quot;</span><span class=p>:</span> <span class=s2>&quot;Albert&quot;</span><span class=p>}</span>

<span class=c1># Count them and save the count.</span>
<span class=n>count</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>laureates</span><span class=o>.</span><span class=n>count_documents</span><span class=p>(</span><span class=n>criteria</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>count</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>1
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> </div> </div> <div class=highlight><pre><span></span><code><span class=n>db</span><span class=o>.</span><span class=n>laureates</span><span class=o>.</span><span class=n>find_one</span><span class=p>(</span><span class=n>criteria</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_text output_subarea output_execute_result"> <pre>
<code>{&#39;_id&#39;: ObjectId(&#39;5f1f4e418defad6d9f1ccead&#39;),
 &#39;id&#39;: &#39;26&#39;,
 &#39;firstname&#39;: &#39;Albert&#39;,
 &#39;surname&#39;: &#39;Einstein&#39;,
 &#39;born&#39;: &#39;1879-03-14&#39;,
 &#39;died&#39;: &#39;1955-04-18&#39;,
 &#39;bornCountry&#39;: &#39;Germany&#39;,
 &#39;bornCountryCode&#39;: &#39;DE&#39;,
 &#39;bornCity&#39;: &#39;Ulm&#39;,
 &#39;diedCountry&#39;: &#39;USA&#39;,
 &#39;diedCountryCode&#39;: &#39;US&#39;,
 &#39;diedCity&#39;: &#39;Princeton, NJ&#39;,
 &#39;gender&#39;: &#39;male&#39;,
 &#39;prizes&#39;: [{&#39;year&#39;: &#39;1921&#39;,
   &#39;category&#39;: &#39;physics&#39;,
   &#39;share&#39;: &#39;1&#39;,
   &#39;motivation&#39;: &#39;&#34;for his services to Theoretical Physics, and especially for his discovery of the law of the photoelectric effect&#34;&#39;,
   &#39;affiliations&#39;: [{&#39;name&#39;: &#39;Kaiser-Wilhelm-Institut (now Max-Planck-Institut) für Physik&#39;,
     &#39;city&#39;: &#39;Berlin&#39;,
     &#39;country&#39;: &#39;Germany&#39;}]}]}</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h2 id=finding-and-dot-notation-lesson-3>Finding, and Dot Notation - Lesson 3<a class=headerlink href=#finding-and-dot-notation-lesson-3 title="Permanent link">&para;</a></h2> <p></div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>pymongo</span> <span class=kn>import</span> <span class=n>MongoClient</span>

<span class=n>client</span> <span class=o>=</span> <span class=n>MongoClient</span><span class=p>()</span>
<span class=n>db</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>nobel</span>
<span class=nb>print</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>db</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>MongoClient(host=[&#39;localhost:27017&#39;], document_class=dict, tz_aware=False, connect=True)
Database(MongoClient(host=[&#39;localhost:27017&#39;], document_class=dict, tz_aware=False, connect=True), &#39;nobel&#39;)
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h3 id=query-operators>Query operators<a class=headerlink href=#query-operators title="Permanent link">&para;</a></h3> <p></div> </div></p> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> Query operators provide us more options when constructing filters. For example, we may wish to find documents where a field's value matches any of a set of options. To do this we can use the <code>$in</code> query operator. </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> - How many laureates were born in any of "Canada", "Mexico", or "USA"? </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1>#Save a filter for laureates who were born in with Canada, Mexico, or the USA.</span>
<span class=n>criteria</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;bornCountry&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;$in&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;Canada&quot;</span><span class=p>,</span> <span class=s2>&quot;Mexico&quot;</span><span class=p>,</span> <span class=s2>&quot;USA&quot;</span><span class=p>]}}</span>

<span class=c1># Count them and save the count.</span>
<span class=n>count</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>laureates</span><span class=o>.</span><span class=n>count_documents</span><span class=p>(</span><span class=n>criteria</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>count</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>295
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> If we wish to accept all but one option as a value for a field, we can use the <code>$ne</code> (<strong>n</strong>ot <strong>e</strong>qual) operator. </div> </div></p> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> - How many laureates died in the USA but were not born in the USA? </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1># Save a filter for laureates who died in the USA and were not born there.</span>
<span class=n>criteria</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;bornCountry&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;$ne&quot;</span><span class=p>:</span> <span class=s2>&quot;USA&quot;</span><span class=p>},</span> <span class=s2>&quot;diedCountry&quot;</span><span class=p>:</span> <span class=s2>&quot;USA&quot;</span><span class=p>}</span>

<span class=c1># Count them and save the count.</span>
<span class=n>count</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>laureates</span><span class=o>.</span><span class=n>count_documents</span><span class=p>(</span><span class=n>criteria</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>count</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>71
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> Below is a list of <em>comparison</em> query operators that are available in MongoDB: </div> </div></p> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> <code>$eq</code> -- Matches values that are equal to a specified value. <br> <code>$gt</code> -- Matches values that are greater than a specified value. <br> <code>$gte</code> -- Matches values that are greater than or equal to a specified value. <br> <code>$in</code> -- Matches any of the values specified in an array. <br> <code>$lt</code> -- Matches values that are less than a specified value. <br> <code>$lte</code> -- Matches values that are less than or equal to a specified value. <br> <code>$ne</code> -- Matches all values that are not equal to a specified value. <br> <code>$nin</code> -- Matches none of the values specified in an array. </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> In addition to comparison query operators, we can use <em>logical</em> query operators in our filters as well. </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> - How many laureates died in Canada <strong><em>OR</em></strong> were born in France? </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1>#Save a filter for laureates who were born in Canada OR died in France.</span>
<span class=n>criteria</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;$or&quot;</span><span class=p>:[{</span><span class=s2>&quot;diedCountry&quot;</span><span class=p>:</span> <span class=s2>&quot;Canada&quot;</span><span class=p>},</span> <span class=p>{</span><span class=s2>&quot;bornCountry&quot;</span><span class=p>:</span> <span class=s2>&quot;France&quot;</span><span class=p>}]}</span>

<span class=c1># Count them and save the count.</span>
<span class=n>count</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>laureates</span><span class=o>.</span><span class=n>count_documents</span><span class=p>(</span><span class=n>criteria</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>count</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>59
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> Below is a list of <em>logical</em> query operators that are available in MongoDB: </div> </div></p> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> <code>$and</code> -- Joins query clauses with a logical AND returns all documents that match the conditions of both clauses. <br> <code>$not</code> -- Inverts the effect of a query expression and returns documents that do not match the query expression. <br> <code>$nor</code> -- Joins query clauses with a logical NOR returns all documents that fail to match both clauses. <br> <code>$or</code> -- Joins query clauses with a logical OR returns all documents that match the conditions of either clause. </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> See https://docs.mongodb.com/manual/reference/operator/query/ for more operators! </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1></p> <h3 id=using-dot-notation>Using dot notation<a class=headerlink href=#using-dot-notation title="Permanent link">&para;</a></h3> <p></div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> You will notice that the <code>prizes</code> field of a <code>laureates</code> document consists of an array of subdocuments:</p> <p>An example <code>laureates</code> document:</p> <p><div class=highlight><pre><span></span><code>{&#39;_id&#39;: ObjectId(&#39;5b9ac94ff35b63cf5231ccb1&#39;),
 &#39;born&#39;: &#39;1845-03-27&#39;,
 &#39;bornCity&#39;: &#39;Lennep (now Remscheid)&#39;,
 &#39;bornCountry&#39;: &#39;Prussia (now Germany)&#39;,
 &#39;bornCountryCode&#39;: &#39;DE&#39;,
 &#39;died&#39;: &#39;1923-02-10&#39;,
 &#39;diedCity&#39;: &#39;Munich&#39;,
 &#39;diedCountry&#39;: &#39;Germany&#39;,
 &#39;diedCountryCode&#39;: &#39;DE&#39;,
 &#39;firstname&#39;: &#39;Wilhelm Conrad&#39;,
 &#39;gender&#39;: &#39;male&#39;,
 &#39;id&#39;: &#39;1&#39;,
 &#39;prizes&#39;: [{&#39;affiliations&#39;: [{&#39;city&#39;: &#39;Munich&#39;,
                               &#39;country&#39;: &#39;Germany&#39;,
                               &#39;name&#39;: &#39;Munich University&#39;}],
             &#39;category&#39;: &#39;physics&#39;,
             &#39;motivation&#39;: &#39;&quot;in recognition of the extraordinary services &#39;
                           &#39;he has rendered by the discovery of the &#39;
                           &#39;remarkable rays subsequently named after him&quot;&#39;,
             &#39;share&#39;: &#39;1&#39;,
             &#39;year&#39;: &#39;1901&#39;}],
 &#39;surname&#39;: &#39;Röntgen&#39;}
</code></pre></div> </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> An easy way to construct filters for array entries or subdocument fields is to use dot notation. </div> </div></p> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> - Use the <code>$exists</code> operator to find out how many laureates were awarded at least two prizes? </div> </div></p> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1>#Save a filter for laureates who were awarded at least two prizes. </span>
<span class=n>criteria</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;prizes.1&quot;</span><span class=p>:{</span><span class=s2>&quot;$exists&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>}}</span>

<span class=c1># Count them and save the count.</span>
<span class=n>count</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>laureates</span><span class=o>.</span><span class=n>count_documents</span><span class=p>(</span><span class=n>criteria</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>count</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>6
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing text_cell rendered"> <p><div class=inner_cell markdown=1> <div class="text_cell_render border-box-sizing rendered_html" markdown=1> - Estimate how many laureates were awarded at least two prizes in physics specifically? </div> </div></p> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> <div class=highlight><pre><span></span><code><span class=c1>#Save a filter to estimate the number of laureates who were awarded at least two prizes in physics. </span>
<span class=n>criteria</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;prizes.0.category&quot;</span><span class=p>:</span> <span class=s2>&quot;physics&quot;</span><span class=p>,</span> <span class=s2>&quot;prizes.1.category&quot;</span><span class=p>:</span> <span class=s2>&quot;physics&quot;</span><span class=p>}</span>

<span class=c1># Count them and save the count.</span>
<span class=n>count</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>laureates</span><span class=o>.</span><span class=n>count_documents</span><span class=p>(</span><span class=n>criteria</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>count</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_subarea output_stream output_stdout output_text"> <pre>
<code>1
</code>
</pre> </div> </div> </div> </div> <div class="cell border-box-sizing code_cell rendered"> <div class=input> </div> </div> <div class=highlight><pre><span></span><code><span class=n>db</span><span class=o>.</span><span class=n>laureates</span><span class=o>.</span><span class=n>find_one</span><span class=p>(</span><span class=n>criteria</span><span class=p>)</span>
</code></pre></div> </div> <div class=output_wrapper markdown=1> <div class=output markdown=1> <div class=output_area markdown=1> <div class="output_text output_subarea output_execute_result"> <pre>
<code>{&#39;_id&#39;: ObjectId(&#39;5f1f4e418defad6d9f1cced5&#39;),
 &#39;id&#39;: &#39;66&#39;,
 &#39;firstname&#39;: &#39;John&#39;,
 &#39;surname&#39;: &#39;Bardeen&#39;,
 &#39;born&#39;: &#39;1908-05-23&#39;,
 &#39;died&#39;: &#39;1991-01-30&#39;,
 &#39;bornCountry&#39;: &#39;USA&#39;,
 &#39;bornCountryCode&#39;: &#39;US&#39;,
 &#39;bornCity&#39;: &#39;Madison, WI&#39;,
 &#39;diedCountry&#39;: &#39;USA&#39;,
 &#39;diedCountryCode&#39;: &#39;US&#39;,
 &#39;diedCity&#39;: &#39;Boston, MA&#39;,
 &#39;gender&#39;: &#39;male&#39;,
 &#39;prizes&#39;: [{&#39;year&#39;: &#39;1956&#39;,
   &#39;category&#39;: &#39;physics&#39;,
   &#39;share&#39;: &#39;3&#39;,
   &#39;motivation&#39;: &#39;&#34;for their researches on semiconductors and their discovery of the transistor effect&#34;&#39;,
   &#39;affiliations&#39;: [{&#39;name&#39;: &#39;University of Illinois&#39;,
     &#39;city&#39;: &#39;Urbana, IL&#39;,
     &#39;country&#39;: &#39;USA&#39;}]},
  {&#39;year&#39;: &#39;1972&#39;,
   &#39;category&#39;: &#39;physics&#39;,
   &#39;share&#39;: &#39;3&#39;,
   &#39;motivation&#39;: &#39;&#34;for their jointly developed theory of superconductivity, usually called the BCS-theory&#34;&#39;,
   &#39;affiliations&#39;: [{&#39;name&#39;: &#39;University of Illinois&#39;,
     &#39;city&#39;: &#39;Urbana, IL&#39;,
     &#39;country&#39;: &#39;USA&#39;}]}]}</code>
</pre> </div> </div> </div> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../../02_building_logic/2%20-%20Python%20Primer%20-%20Part%20II/ title="Advanced Python" class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Advanced Python </div> </div> </a> <a href=../../04_MongoDB_part2/lesson/ title="Advanced MongoDB" class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Advanced MongoDB </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Built by The Materials Project </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/vendor.92ffa368.min.js></script> <script src=../../../assets/javascripts/bundle.5123e3d4.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../../..",
          features: [],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>